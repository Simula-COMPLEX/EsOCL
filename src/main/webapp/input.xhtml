<ui:composition xmlns:h="http://java.sun.com/jsf/html"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns="http://www.w3.org/1999/xhtml"
>

    <h:form id="inputform" prependId="false" enctype="multipart/form-data">
        <p:growl id="growl" showDetail="true" sticky="true"/>
        <div class="panel panel-default" id="inputformPanel">

            <div class="panel-heading">
                <h3 class="panel-title">
                    Model Input Panel<a class="pull-right" role="button"
                                        data-toggle="collapse" href="#inputformPanelBody"
                                        aria-expanded="false"/>
                </h3>

            </div>
            <div class="panel-body" id="inputformPanelBody">


                <div id="inputPanel">

                    <div class="row">
                        <div class="col-lg-6">


                            <div class="form-inline">

                                <h:outputLabel styleClass="control-label" value="UML Model"
                                               style="padding-left: 10px;padding-right: 10px"/>

                                <span class="btn btn-raised btn-file fileinput-button">
                                    <i class="fa fa-upload"></i>
                                    <span> Select Model </span>
                                    <h:inputFile id="file" styleClass=""
                                                 label="Upload Model" value="#{bean.diagram}" required="true"
                                                 requiredMessage="File not selected !!"/>

                                </span>


                                <div class="form-group">
                                    <h:commandButton id="submit" styleClass="btn btn-raised btn-info"
                                                     action="#{bean.loadModel}"
                                                     value="Upload Model">
                                    </h:commandButton>

                                </div>

                         <!--       <div class="form-group">
                                    <h:commandButton id="RoyalAndLoyal" styleClass="btn btn-raised btn-primary"
                                                     action="#{bean.royalModel()}" value="Royal And Loyal"
                                                     immediate="true">
                                        <f:ajax render="inputform"/>
                                    </h:commandButton>
                                </div>
-->
                                <div class="form-group">
                                    <h:commandButton id="reset" styleClass="btn btn-raised btn-danger"
                                                     action="#{bean.reset()}" value="Reset"
                                                     immediate="true">
                                        <f:ajax render="inputform"/>
                                    </h:commandButton>
                                </div>

                            </div>

                        </div>

                        <div class="col-lg-6">
                            <h:outputLabel value="Model Name: #{bean.modelName}"/>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="panel panel-default" id="queryPanel">
            <div class="panel-heading">
                <h3 class="panel-title">
                    Constraint Panel<a class="pull-right" role="button"
                                       data-toggle="collapse" href="#constraintPanel"
                                       aria-expanded="false"/>
                </h3>
            </div>
            <div class="panel-body" id="constraintPanel">


                <div class="panel panel-default" id="informationPanel">
                    <div class="panel-body">

                        <div class="row">
                            <div class="col-lg-12">

                                <label>Constraint</label>
                                <h:inputTextarea value="#{bean.constraint}" rows="3" id="constraint"
                                                 class="form-control" cols="80">

                                </h:inputTextarea>


                            </div>

                        </div>
                        <br/>

                        <div class="row">
                            <div class="col-lg-6">
                                <label for="algos">Search Algorithms</label>
                                <h:selectManyCheckbox value="#{bean.algos}" id="algos" label="Algos"
                                                      styleClass="form-control"
                                                      style="width: 100%">
                                    <f:selectItem itemValue="AVM" itemLabel="AVM"/>
                                    <f:selectItem itemValue="SSGA" itemLabel="SSGA"/>
                                    <f:selectItem itemValue="OpOEA" itemLabel="OpOEA"/>
                                    <f:selectItem itemValue="RandomSearch" itemLabel="RandomSearch"/>
                                </h:selectManyCheckbox>
                            </div>
                            <div class="col-lg-6">
                                <h:outputLabel for="iterations" value="Max Iterations"/>
                                <h:inputText value="#{bean.iterations}" id="iterations" styleClass="form-control"/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-4">

                                <h:commandButton
                                        value="Find Solution" styleClass="btn btn-raised btn-success"
                                        style="margin: 0;width: 100%;">
                                    <f:ajax execute="@this constraint iterations algos"
                                            listener="#{bean.validateConstraint}"
                                            render="inputform"/>
                                </h:commandButton>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>

        <div class="panel panel-default" id="resultPanel">
            <div class="panel-heading">
                <h3 class="panel-title">
                    Result Panel<a class="pull-right" role="button"
                                   data-toggle="collapse" href="#resultPanelBody"
                                   aria-expanded="false"/>
                </h3>
            </div>
            <div class="panel-body" id="resultPanelBody">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-lg-4">

                                <h:outputLabel value="Result: "/>
                                <h:outputLabel style="color:#4caf50" value=" #{bean.result.result}" rendered="#{bean.result.result=='true'}"/>
                                <h:outputLabel style="color:#f44336" value=" #{bean.result.result}" rendered="#{bean.result.result=='false'}"/>
                            </div>

                            <div class="col-lg-4">

                                <h:outputLabel value="Algo: "/>
                                <h:outputLabel style="color:#4caf50" value=" #{bean.result.algo}"/>

                            </div>

                            <div class="col-lg-4">

                                <h:outputLabel value="Iternations: "/>
                                <h:outputLabel style="color:#4caf50" value=" #{bean.result.iternations}"/>

                            </div>
                        </div>


                        <div class="row">
                            <div class="col-lg-6">
                                <h:outputLabel value="Solution: "/>
                                <h:outputLabel style="color:#03a9f4" value="#{bean.result.solution}"/>
                            </div>

                            <div class="col-lg-6">
                                <br/> <b>Constraint : </b>
                                <h:outputLabel value="#{bean.resultConstraint}" style="color:#03a9f4"/>
                            </div>
                        </div>
                        <br/>


                    </div>
                </div>


                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-lg-12">

                                Solutions

                                <table class="table table-bordered table-striped table-responsive display responsive no-wrap">

                                    <thead>
                                    <tr>
                                        <th>No</th>
                                        <th>Solutions</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <ui:repeat varStatus="myVarStatus" value="#{bean.result.solutions}" var="solution">
                                        <tr>
                                            <td>#{myVarStatus.index+1}</td>
                                            <td><h:outputLabel value="Solution: #{bean.result.solution}"/></td>
                                        </tr>
                                    </ui:repeat>
                                    </tbody>
                                </table>


                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </h:form>

</ui:composition>